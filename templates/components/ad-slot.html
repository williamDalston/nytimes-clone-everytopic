<div class="ad-slot ad-{{type}} {{#if sticky}}ad-sticky{{/if}}" data-ad-id="{{id}}">
    {{#if testMode}}
    <div class="ad-placeholder">
        <span class="ad-label">Advertisement</span>
        <span class="ad-dimensions">{{width}} x {{height}}</span>
    </div>
    {{else}}
    <!-- Ad Script Injection Point -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client={{publisherId}}"
        crossorigin="anonymous"></script>
    <ins class="adsbygoogle" style="display:block" data-ad-client="{{publisherId}}" data-ad-slot="{{id}}"
        data-ad-format="auto" data-full-width-responsive="true"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
    {{/if}}
</div>

<style>
    .ad-slot {
        margin: 2rem auto;
        text-align: center;
        background-color: #f8f9fa;
        overflow: hidden;
        position: relative;
        z-index: 10;
    }
    
    /* Prevent ads from overlapping main content */
    .main-content .ad-slot {
        z-index: 1;
    }

    .ad-leaderboard {
        width: 100%;
        max-width: 728px;
        height: 90px;
    }

    .ad-rectangle {
        width: 300px;
        height: 250px;
    }

    .ad-fluid {
        width: 100%;
        min-height: 100px;
    }

    .ad-sticky {
        position: sticky;
        top: calc(var(--header-height, 70px) + var(--space-4, 1rem));
        z-index: 100;
        max-height: calc(100vh - var(--header-height, 70px) - var(--space-8, 3rem));
        overflow-y: auto;
    }
    
    /* Ensure sticky ads don't overlap content on mobile */
    @media (max-width: 1024px) {
        .ad-sticky {
            position: static;
            max-height: none;
        }
    }

    .ad-placeholder {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        width: 100%;
        height: 100%;
        border: 1px dashed #ccc;
        color: #999;
        font-family: sans-serif;
        background-color: #eee;
    }

    .ad-label {
        font-size: 0.75rem;
        text-transform: uppercase;
        letter-spacing: 1px;
        margin-bottom: 0.5rem;
    }

    .ad-dimensions {
        font-weight: bold;
    }
</style>